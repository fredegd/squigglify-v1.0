"use client"

import { motion, Variants } from 'framer-motion';
import { useEffect, useState } from 'react';

interface LogoProps {
    className?: string;
    animated?: boolean;
    duration?: number;
}

export const Logo = ({ className, animated = false, duration = 3 }: LogoProps) => {
    const [isMounted, setIsMounted] = useState(false);

    useEffect(() => {
        setIsMounted(true);
    }, []);

    const pathVariants: Variants = {
        hidden: {
            pathLength: 0,
            opacity: 0,
        },
        visible: (i: number) => ({
            pathLength: 1,
            opacity: 1,
            transition: {
                pathLength: {
                    delay: i === 0 ? 0.3 : duration + (i - 1) * 0.5,
                    duration: i === 0 ? duration : 0.4,
                    ease: "easeInOut" as const
                },
                opacity: {
                    delay: i === 0 ? 0.6 : duration + (i - 1) * 0.5,
                    duration: 0.01
                }
            }
        })
    };

    // If not mounted yet (SSR phase), render a truly invisible SVG to prevent the "glitch" flash
    if (!isMounted) {
        return (
            <svg viewBox="0 0 132.29166 33.072917" className={className} fill="none" style={{ opacity: 0 }}>
                <rect width="100%" height="100%" fill="none" />
            </svg>
        );
    }

    return (
        <svg
            viewBox="0 0 132.29166 33.072917"
            className={className}
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
        >
            <defs>
                <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stopColor="#c084fc" />
                    <stop offset="100%" stopColor="#f472b6" />
                </linearGradient>
            </defs>
            <g transform="matrix(1.0278622,0,0,1.1242534,-37.86131,-76.709363)">
                {/* 1. Main Text: Squigglify */}
                <motion.path
                    variants={pathVariants}
                    custom={0}
                    initial="hidden"
                    animate={animated ? "visible" : { pathLength: 1, opacity: 1 }}
                    stroke="url(#logo-gradient)"
                    strokeWidth="2.64583"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="m 54.878903,74.699524 -1.575287,-2.307359 c -1.267258,-0.901873 -2.275,-1.286417 -3.720248,-1.29897 -1.445249,-0.01255 -2.864585,0.536299 -3.649032,1.511421 -1.626759,2.022174 -1.360223,4.25704 -0.313276,5.369196 2.477369,2.63167 5.972069,0.381344 8.823771,3.494919 1.235772,1.349254 1.716614,2.829926 1.354681,3.960739 -1.173791,3.667361 -5.753836,6.285377 -9.759166,6.180985 -4.005329,-0.104392 -7.654932,-2.408358 -7.62481,-4.899792 0.01506,-1.245717 0.931325,-2.060135 2.592312,-2.140812 1.126343,-0.05471 4.011534,0.888208 6.895162,1.548187 4.955047,1.134067 20.378784,5.964062 21.512855,-2.432679 0.453567,-3.358244 -1.375711,-5.618859 -3.124227,-6.12968 -1.748516,-0.510821 -3.936095,0.03078 -4.869338,1.388465 -1.030867,1.499714 -1.128928,3.936587 -0.55539,5.885588 0.573539,1.949001 2.288224,3.433689 3.651317,3.362426 6.61857,-0.346017 5.868995,-10.805938 5.868995,-10.805938 0,0 -0.524978,11.955904 -0.468089,17.186436 -0.110915,-11.184528 5.651361,-7.294558 6.056537,-17.215447 0.186034,5.21189 -1.152456,10.215541 1.796945,11.371088 6.330285,2.480144 6.581208,-11.409061 6.581208,-11.409061 0,0 0.146749,0.903134 0.307121,3.626479 0.08019,1.361672 0.163777,2.855123 0.234133,4.271714 0.01759,0.354148 0.03435,0.703492 0.05003,1.044772 0.01567,0.34128 0.03026,0.674497 0.0435,0.996389 0.01324,0.321893 0.02513,0.632462 0.03542,0.928447 0.01028,0.295986 0.67198,0.833482 0.990272,0.813208 0.318292,-0.02028 0.632048,-0.05211 0.937289,-0.09711 0.61048,-0.09 1.186895,-0.232623 1.697397,-0.440616 0.510503,-0.207994 0.955093,-0.481355 1.301924,-0.832826 0.34683,-0.35147 0.595902,-0.781049 0.715368,-1.301477 0.242915,-1.05821 0.388325,-2.681281 0.474919,-4.328365 0.155009,-2.948381 0.121554,-4.680612 0.121554,-4.680612 0,0 0.0043,6.036736 0.426384,8.878725 0.148426,0.999324 0.70271,2.163398 1.551104,2.557283 1.312904,0.609545 3.938988,-1.522111 4.60211,-1.536125 1.099756,-0.02324 2.287112,1.490472 3.510962,1.426032 4.5501,-0.239577 5.62626,-8.014853 3.71615,-9.959338 -0.95505,-0.972242 -2.50517,-1.575002 -3.94404,-1.411988 -1.438872,0.163015 -2.766492,1.091805 -3.276568,3.182663 -2.041432,8.368079 6.016508,11.766573 7.906688,2.618112 0.33121,-3.236817 1.84191,0.169523 1.6367,-5.823675 -0.0334,3.487684 0.11413,13.695823 -0.66264,15.172478 -1.37902,2.06984 -7.803482,3.844432 -10.46534,1.532568 -0.332216,-0.288534 -0.13781,-0.566888 0.0065,-0.790882 0.536704,-0.83306 1.729255,-1.12453 2.725208,-1.326148 1.081552,-0.218946 2.135362,-0.02229 3.310752,0.170801 9.92929,1.631141 7.02445,-4.831908 12.01927,-3.817129 6.40993,2.229714 8.90023,-5.144707 6.24256,-9.440865 -0.95505,-0.972242 -2.50517,-1.575002 -3.94404,-1.411988 -1.43887,0.163015 -2.7665,1.091804 -3.27657,3.182663 -0.53973,2.212443 -0.35713,4.128152 0.23894,5.541254 0.59607,1.413101 1.60561,2.323594 2.71973,2.525604 4.14368,0.75132 6.47504,-2.554237 6.52354,-11.347266 -0.0181,3.026485 0.14297,13.758906 -0.6338,15.235561 -1.37902,2.06984 -7.80348,3.844432 -10.46534,1.532568 -0.33222,-0.288534 -0.30076,-0.475879 0.006,-0.790882 0.78502,-0.804878 1.70632,-1.190259 2.7252,-1.326148 1.01889,-0.135889 2.13537,-0.02229 3.31076,0.170801 0.29385,0.04827 0.5906,0.115397 0.89023,0.188304 0.29963,0.07291 0.60214,0.151597 0.90751,0.223 0.30538,0.0714 0.61362,0.135518 0.9247,0.179276 0.31109,0.04376 0.62502,0.06716 0.94178,0.05714 2.14308,-0.653627 6.73409,-5.655394 8.34215,-7.700035 0.77415,-1.011438 1.39722,-2.102589 1.86448,-3.291648 0.8153,-2.07476 1.1992,-5.019782 0.66385,-7.183747 -0.32403,-1.309763 -0.9035,-3.148191 -2.23341,-3.375815 -1.20622,-0.206453 -2.50304,0.517265 -2.92866,2.213858 -0.89694,3.575393 -0.39032,7.349101 0.54968,9.835685 0.59999,1.587153 1.6953,3.687292 3.27538,4.928649 4.01296,3.152704 5.73675,1.152567 6.45224,-2.149732 0.71549,-3.302299 0.5911,-8.708916 0.5911,-8.708916 0,0 -0.32296,10.229741 3.1572,11.55852 2.04586,0.781139 6.0899,0.406521 5.81318,-3.838031 -0.27672,-4.244552 -2.82884,-9.697433 -1.44411,-12.607005 1.38473,-2.909572 8.46706,-1.52642 7.15211,0.569893 -0.65748,1.048158 -2.80292,2.234906 -4.64891,3.690112 -1.846,1.455206 -3.39255,3.178827 -5.0464,3.186927 -0.82693,0.0041 -0.0681,-0.02749 1.23702,-0.04532 2.76627,0.0077 5.39244,0.353617 7.88665,-0.967242 0.89081,-0.475374 1.54883,-1.366947 1.97561,-0.858931 0.44134,0.525348 0.82233,2.468016 1.20166,4.064249 2.10445,8.855494 8.67801,2.678758 8.64888,-4.786761 0.20845,4.814257 -3.80723,13.765181 -6.08614,15.733732 -1.13945,0.984276 -2.1591,1.327931 -3.10235,1.435476 -0.94325,0.107545 -3.67201,0.03374 -5.69694,0.0462"
                />

                {/* 2. first dot (i) - Left dot */}
                <motion.path
                    variants={pathVariants}
                    custom={1}
                    initial="hidden"
                    animate={animated ? "visible" : { pathLength: 1, opacity: 1 }}
                    stroke="url(#logo-gradient)"
                    strokeWidth="2.64583"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="m 91.250974,72.623701 0.312347,-0.473332"
                />

                {/* 3. second dot (i) - Right dot */}
                <motion.path
                    variants={pathVariants}
                    custom={2}
                    initial="hidden"
                    animate={animated ? "visible" : { pathLength: 1, opacity: 1 }}
                    stroke="url(#logo-gradient)"
                    strokeWidth="2.64583"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="m 138.106,72.623701 0.31235,-0.473332"
                />
            </g>
        </svg>
    );
};
